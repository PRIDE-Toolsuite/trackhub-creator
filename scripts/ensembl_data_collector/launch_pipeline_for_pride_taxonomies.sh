#!/usr/bin/env bash

# Collect data from the latest Ensembl Release, pipeline launcher
#   usage: launcher.sh <project_description_data.json>
#
# Manuel Bernal Llinares <mbdebian@gmail.com>

# Include helpers
source scripts/commons/helper_functions.sh

# Commands
PWD=$(which pwd)

# Logging with prefix
function mylogger() {
    logger "[Ensembl_Data_Collector] $@"
}

# Pipeline parameters
PIPELINE_PARAMETERS='ncbi_taxonomy_ids=2,179,197,234,235,253,266,274,287,292,294,306,316,317,358,375,446,470,485,511,546,547,554,562,602,622,630,632,670,714,777,803,964,996,1076,1097,1117,1140,1143,1148,1165,1239,1247,1270,1280,1282,1299,1311,1314,1349,1351,1402,1428,1471,1578,1639,1694,1718,1760,1772,1773,1836,1902,1931,2096,2100,2134,2214,2234,2239,2242,2261,2323,2702,2711,2759,2830,2902,2903,3055,3112,3168,3218,3347,3482,3524,3544,3603,3633,3635,3696,3701,3702,3708,3712,3715,3716,3735,3750,3818,3827,3847,3879,3888,3915,3932,3983,3988,4006,4081,4097,4100,4113,4146,4513,4530,4565,4577,4787,4896,4932,4934,4952,5052,5059,5061,5085,5141,5145,5270,5325,5476,5478,5516,5656,5659,5661,5682,5691,5692,5702,5722,5730,5741,5807,5811,5833,5866,5867,5874,5911,5936,6087,6183,6191,6192,6204,6239,6269,6289,6326,6491,6500,6526,6550,6655,6915,6945,7029,7054,7070,7091,7130,7141,7159,7165,7215,7227,7240,7245,7394,7460,7574,7604,7609,7634,7668,7719,7787,7901,7955,7962,7998,8022,8031,8049,8063,8127,8316,8355,8392,8618,8620,8624,8665,8801,9030,9031,9103,9534,9541,9544,9592,9598,9600,9605,9606,9615,9646,9685,9704,9739,9778,9796,9798,9823,9825,9838,9913,9925,9935,9940,9975,9986,10029,10036,10088,10090,10114,10116,10117,10360,10401,10665,10677,10699,11120,11250,11308,11320,11594,11646,11786,12336,12814,13164,13216,13249,13443,13686,28034,28384,29159,29170,29459,29491,29760,29780,29911,29916,30069,30195,30608,31646,32049,32264,32644,33083,33090,33169,33208,33657,34305,34317,34613,35084,35554,35608,36020,36237,36329,36420,36674,37334,37965,38727,38783,39053,39946,40137,40521,40674,41856,42151,42156,42157,42410,43179,43989,44271,44689,45133,45693,46456,46465,47428,47664,47770,48479,51240,51453,51671,51953,51997,52638,52641,55153,55218,56029,56031,58042,58334,59374,59729,60423,61195,63366,63367,63429,63737,65121,66897,67593,69293,70448,72568,73239,74968,75058,79327,79698,83332,83333,83906,84588,85962,85963,86260,86662,86794,89187,89462,89947,89948,89949,89950,89951,89952,89953,90100,90461,90675,90690,92050,94951,95145,95602,96939,100226,101510,102235,102618,103349,103690,104421,106773,106774,106788,107243,108061,112273,114727,116597,116598,118099,121845,128161,135062,135461,138336,141984,144042,145458,145481,145943,145953,147802,150808,150847,152600,152952,155864,157728,158606,160488,160490,160621,160791,167443,167539,169683,169963,170187,171101,174621,174633,174934,177437,178616,181082,184922,187878,192222,194963,196627,198215,198252,203275,207559,208963,208964,209261,210007,210352,212035,212790,213863,214053,214687,216595,216597,217219,218493,219334,222863,223926,224141,224308,224325,224326,224911,226186,226900,227748,228400,229193,229533,230741,235909,237561,239373,241073,242231,243230,243277,246200,248764,252305,255364,256737,262316,264201,264731,265669,266835,266940,267870,267872,269796,272557,272559,272560,272623,272624,272629,272843,272944,273068,273075,273133,278161,282458,283166,284812,287375,290434,291146,294128,296587,298386,300563,300852,307685,307686,307796,314256,314262,314265,315358,315749,315750,316407,317513,319795,329726,330879,332648,334249,336722,338187,338654,343232,343237,347515,348780,349161,349163,359391,360104,369822,375451,376619,378548,378806,381124,382359,383379,386585,388399,390236,391595,391619,391624,391904,392499,394503,396513,398578,398580,401614,404381,407821,411462,411470,414717,414718,416276,420245,425011,427577,430066,431275,435258,435433,436486,436495,437552,441768,445686,447135,448385,449447,451515,470146,474186,477816,478009,478434,481672,488538,491613,500634,508771,511145,515622,518766,521009,523841,526225,526997,527000,527031,529843,531832,535026,544404,546414,546991,547559,552536,556484,558017,559292,561177,570509,575412,578822,584721,589904,592022,593117,593907,611539,626528,634469,643867,647653,655183,657322,657629,660055,661410,667013,667282,669502,671143,693977,694569,703612,718308,746128,747078,762903,763924,862962,867900,884019,905079,906914,911045,929793,931281,941638,985076,1005941,1006581,1028688,1036171,1042878,1050258,1055524,1080772,1087439,1111708,1131323,1134506,1143193,1144889,1191523,1192767,1193501,1198133,1208660,1209523,1219071,1220585,1231719,1232801,1235314,1264690,1274414,1274420,1274423,1274426,1274432,1284813,1287689,1292218,1305737,1323429,1334565,1344414,1348584,1348585,1350466,1358430,1391726,1400820,1400821,1408223,1408224,1415784,1427524,1447716,1457551,1477405,1479235,1486246,1542223,1562887,1666912,1798193'

mylogger "Starting Ensembl data collection for PRIDE Taxonomies '${PIPELINE_PARAMETERS}'"
mylogger "Current directory is $($PWD)"
mylogger "<--- Running ensembl_data_collector --->"
